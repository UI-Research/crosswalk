<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>streamlining inter-temporal and inter-geography crosswalking • crosswalk</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="streamlining inter-temporal and inter-geography crosswalking">
<meta name="description" content="An R package providing a simple interface to access and apply crosswalks.">
<meta property="og:description" content="An R package providing a simple interface to access and apply crosswalks.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">crosswalk</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/standardizing-longitudinal-data.html">Standardizing Longitudinal Data</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="crosswalk">crosswalk<a class="anchor" aria-label="anchor" href="#crosswalk"></a>
</h1></div>
<p>An R package providing a simple interface to access and apply crosswalks.</p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This package provides a consistent API and standardized versions of crosswalks to enable consistent approaches that work across different geography and year combinations. The package also facilitates interpolation–that is, adjusting source geography/year values by their crosswalk weights and translating these values to the desired target geography/year–including diagnostics of the joins between source data and crosswalks.</p>
<p>The package sources crosswalks from:</p>
<ul>
<li>
<strong>Geocorr</strong> (Missouri Census Data Center) - for same-year crosswalks between geographies. Uses GeoCorr 2022 (2020 Census geography) for 2020s data and GeoCorr 2018 (2010 Census geography) for 2010s data. The correct version is selected automatically based on year context.</li>
<li>
<strong>IPUMS NHGIS</strong> - for inter-temporal crosswalks (across different census years)</li>
<li>
<strong>CT Data Collaborative</strong> - for Connecticut 2020→2022 crosswalks (planning region changes)</li>
</ul>
</div>
<div class="section level2">
<h2 id="why-use-crosswalk">Why Use <code>crosswalk</code>?<a class="anchor" aria-label="anchor" href="#why-use-crosswalk"></a>
</h2>
<ul>
<li>
<strong>Programmatic access</strong>: No more manual downloads from web interfaces</li>
<li>
<strong>Standardized output</strong>: Consistent column names across all crosswalk sources</li>
<li>
<strong>Metadata tracking</strong>: Full provenance of crosswalks stored as attributes</li>
<li>
<strong>Crosswalk chaining</strong>: Automatic chaining when multiple crosswalks are required</li>
<li>
<strong>Local caching</strong>: Reproducible workflows with locally-cached crosswalks for speed</li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install from GitHub</span></span>
<span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/renv/reference/install.html" class="external-link">install</a></span><span class="op">(</span><span class="st">"UI-Research/crosswalk"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Downloading packages -------------------------------------------------------</span></span>
<span><span class="co">#&gt; - Downloading crosswalk 0.0.0.9001 from GitHub ... OK [95.7 Kb in 0.54s]</span></span>
<span><span class="co">#&gt; Successfully downloaded 1 package in 1 second.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The following package(s) will be installed:</span></span>
<span><span class="co">#&gt; - crosswalk [UI-Research/crosswalk]</span></span>
<span><span class="co">#&gt; These packages will be installed into "C:/Users/wcurrangroome/AppData/Local/Temp/RtmpkTRpSB/temp_libpath1dfc460a4888".</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; # Installing packages --------------------------------------------------------</span></span>
<span><span class="co">#&gt; - Installing crosswalk 0.0.0.9001 ...           OK [built from source and cached in 2.1s]</span></span>
<span><span class="co">#&gt; Successfully installed 1 package in 2.4 seconds.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="overview-1">Overview<a class="anchor" aria-label="anchor" href="#overview-1"></a>
</h2>
<p>First we obtain a crosswalk and apply it to our data:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ui-research.github.io/crosswalk/">crosswalk</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">source_data</span> <span class="op">=</span> <span class="fu">tidycensus</span><span class="fu">::</span><span class="fu"><a href="https://walker-data.com/tidycensus/reference/get_acs.html" class="external-link">get_acs</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="fl">2023</span>,</span>
<span>    geography <span class="op">=</span> <span class="st">"zcta"</span>,</span>
<span>    output <span class="op">=</span> <span class="st">"wide"</span>,</span>
<span>    variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>below_poverty_level <span class="op">=</span> <span class="st">"B17001_002"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    source_geoid <span class="op">=</span> <span class="va">GEOID</span>,</span>
<span>    count_below_poverty_level <span class="op">=</span> <span class="va">below_poverty_levelE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get a crosswalk from ZCTAs to PUMAs (same year, uses Geocorr (2022))</span></span>
<span><span class="va">zcta_puma_crosswalk</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_crosswalk.html">get_crosswalk</a></span><span class="op">(</span></span>
<span>  source_geography <span class="op">=</span> <span class="st">"zcta"</span>,</span>
<span>  target_geography <span class="op">=</span> <span class="st">"puma22"</span>,</span>
<span>  weight <span class="op">=</span> <span class="st">"population"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Apply the crosswalk to your data</span></span>
<span><span class="va">crosswalked_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/crosswalk_data.html">crosswalk_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">source_data</span>,</span>
<span>  crosswalk <span class="op">=</span> <span class="va">zcta_puma_crosswalk</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Or in a single step</span></span>
<span><span class="va">crosswalked_data</span> <span class="op">=</span> <span class="fu"><a href="reference/crosswalk_data.html">crosswalk_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">source_data</span>,</span>
<span>  source_geography <span class="op">=</span> <span class="st">"zcta"</span>,</span>
<span>  target_geography <span class="op">=</span> <span class="st">"puma22"</span>,</span>
<span>  weight <span class="op">=</span> <span class="st">"population"</span><span class="op">)</span></span></code></pre></div>
<p>What does the crosswalk(s) reflect and how was it sourced?</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">crosswalked_data</span>, <span class="st">"crosswalk_metadata"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $call_parameters</span></span>
<span><span class="co">#&gt; $call_parameters$source_geography</span></span>
<span><span class="co">#&gt; [1] "zcta"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $call_parameters$target_geography</span></span>
<span><span class="co">#&gt; [1] "puma22"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $call_parameters$source_year</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $call_parameters$target_year</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $call_parameters$weight</span></span>
<span><span class="co">#&gt; [1] "population"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $call_parameters$cache</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $data_source</span></span>
<span><span class="co">#&gt; [1] "geocorr"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $data_source_full_name</span></span>
<span><span class="co">#&gt; [1] "Geocorr 2022 (Missouri Census Data Center)"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $download_url</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $api_endpoint</span></span>
<span><span class="co">#&gt; [1] "https://mcdc.missouri.edu/cgi-bin/broker"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $documentation_url</span></span>
<span><span class="co">#&gt; [1] "https://mcdc.missouri.edu/applications/geocorr2022.html"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $citation_url</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $github_repository</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $source_geography</span></span>
<span><span class="co">#&gt; [1] "zcta"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $source_geography_standardized</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $target_geography</span></span>
<span><span class="co">#&gt; [1] "puma22"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $target_geography_standardized</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $source_year</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $target_year</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $reference_year</span></span>
<span><span class="co">#&gt; [1] "2022"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $weighting_variable</span></span>
<span><span class="co">#&gt; [1] "population"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $state_coverage</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $notes</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $retrieved_at</span></span>
<span><span class="co">#&gt; [1] "2026-02-02 13:20:20 EST"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $cached</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $cache_path</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $read_from_cache</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $is_multi_step</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $crosswalk_package_version</span></span>
<span><span class="co">#&gt; [1] "0.0.0.9001"</span></span></code></pre></div>
<p>How well did the crosswalk join to our source data?</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## look at all the characteristics of the join(s) between the source data</span></span>
<span><span class="co">## and the crosswalks</span></span>
<span><span class="va">join_quality</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">crosswalked_data</span>, <span class="st">"join_quality"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## what share of records in the source data do not join to a crosswalk and</span></span>
<span><span class="co">## thus are dropped during the crosswalking process?</span></span>
<span><span class="va">join_quality</span><span class="op">$</span><span class="va">pct_data_unmatched</span></span>
<span><span class="co">#&gt; [1] 0.4234277</span></span>
<span></span>
<span><span class="co">## zctas aren't nested within states, otherwise join_quality$state_analysis_data </span></span>
<span><span class="co">## would help us to ID whether non-joining source data were clustered within one</span></span>
<span><span class="co">## or a few states. instead we can join to spatial data to diagnose further:</span></span>
<span><span class="va">zctas_sf</span> <span class="op">=</span> <span class="fu">tigris</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tigris/man/zctas.html" class="external-link">zctas</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2023</span><span class="op">)</span></span>
<span><span class="co">#&gt;   |                                                                              |                                                                      |   0%  |                                                                              |                                                                      |   1%  |                                                                              |=                                                                     |   1%  |                                                                              |=                                                                     |   2%  |                                                                              |==                                                                    |   2%  |                                                                              |==                                                                    |   3%  |                                                                              |==                                                                    |   4%  |                                                                              |===                                                                   |   4%  |                                                                              |===                                                                   |   5%  |                                                                              |====                                                                  |   5%  |                                                                              |====                                                                  |   6%  |                                                                              |=====                                                                 |   6%  |                                                                              |=====                                                                 |   7%  |                                                                              |=====                                                                 |   8%  |                                                                              |======                                                                |   8%  |                                                                              |======                                                                |   9%  |                                                                              |=======                                                               |   9%  |                                                                              |=======                                                               |  10%  |                                                                              |=======                                                               |  11%  |                                                                              |========                                                              |  11%  |                                                                              |========                                                              |  12%  |                                                                              |=========                                                             |  12%  |                                                                              |=========                                                             |  13%  |                                                                              |=========                                                             |  14%  |                                                                              |==========                                                            |  14%  |                                                                              |==========                                                            |  15%  |                                                                              |===========                                                           |  15%  |                                                                              |===========                                                           |  16%  |                                                                              |============                                                          |  16%  |                                                                              |============                                                          |  17%  |                                                                              |============                                                          |  18%  |                                                                              |=============                                                         |  18%  |                                                                              |=============                                                         |  19%  |                                                                              |==============                                                        |  19%  |                                                                              |==============                                                        |  20%  |                                                                              |==============                                                        |  21%  |                                                                              |===============                                                       |  21%  |                                                                              |===============                                                       |  22%  |                                                                              |================                                                      |  22%  |                                                                              |================                                                      |  23%  |                                                                              |================                                                      |  24%  |                                                                              |=================                                                     |  24%  |                                                                              |=================                                                     |  25%  |                                                                              |==================                                                    |  25%  |                                                                              |==================                                                    |  26%  |                                                                              |===================                                                   |  26%  |                                                                              |===================                                                   |  27%  |                                                                              |===================                                                   |  28%  |                                                                              |====================                                                  |  28%  |                                                                              |====================                                                  |  29%  |                                                                              |=====================                                                 |  29%  |                                                                              |=====================                                                 |  30%  |                                                                              |=====================                                                 |  31%  |                                                                              |======================                                                |  31%  |                                                                              |======================                                                |  32%  |                                                                              |=======================                                               |  32%  |                                                                              |=======================                                               |  33%  |                                                                              |=======================                                               |  34%  |                                                                              |========================                                              |  34%  |                                                                              |========================                                              |  35%  |                                                                              |=========================                                             |  35%  |                                                                              |=========================                                             |  36%  |                                                                              |==========================                                            |  36%  |                                                                              |==========================                                            |  37%  |                                                                              |==========================                                            |  38%  |                                                                              |===========================                                           |  38%  |                                                                              |===========================                                           |  39%  |                                                                              |============================                                          |  39%  |                                                                              |============================                                          |  40%  |                                                                              |============================                                          |  41%  |                                                                              |=============================                                         |  41%  |                                                                              |=============================                                         |  42%  |                                                                              |==============================                                        |  42%  |                                                                              |==============================                                        |  43%  |                                                                              |==============================                                        |  44%  |                                                                              |===============================                                       |  44%  |                                                                              |===============================                                       |  45%  |                                                                              |================================                                      |  45%  |                                                                              |================================                                      |  46%  |                                                                              |=================================                                     |  46%  |                                                                              |=================================                                     |  47%  |                                                                              |=================================                                     |  48%  |                                                                              |==================================                                    |  48%  |                                                                              |==================================                                    |  49%  |                                                                              |===================================                                   |  49%  |                                                                              |===================================                                   |  50%  |                                                                              |===================================                                   |  51%  |                                                                              |====================================                                  |  51%  |                                                                              |====================================                                  |  52%  |                                                                              |=====================================                                 |  52%  |                                                                              |=====================================                                 |  53%  |                                                                              |=====================================                                 |  54%  |                                                                              |======================================                                |  54%  |                                                                              |======================================                                |  55%  |                                                                              |=======================================                               |  55%  |                                                                              |=======================================                               |  56%  |                                                                              |========================================                              |  56%  |                                                                              |========================================                              |  57%  |                                                                              |========================================                              |  58%  |                                                                              |=========================================                             |  58%  |                                                                              |=========================================                             |  59%  |                                                                              |==========================================                            |  59%  |                                                                              |==========================================                            |  60%  |                                                                              |==========================================                            |  61%  |                                                                              |===========================================                           |  61%  |                                                                              |===========================================                           |  62%  |                                                                              |============================================                          |  62%  |                                                                              |============================================                          |  63%  |                                                                              |============================================                          |  64%  |                                                                              |=============================================                         |  64%  |                                                                              |=============================================                         |  65%  |                                                                              |==============================================                        |  65%  |                                                                              |==============================================                        |  66%  |                                                                              |===============================================                       |  66%  |                                                                              |===============================================                       |  67%  |                                                                              |===============================================                       |  68%  |                                                                              |================================================                      |  68%  |                                                                              |================================================                      |  69%  |                                                                              |=================================================                     |  69%  |                                                                              |=================================================                     |  70%  |                                                                              |=================================================                     |  71%  |                                                                              |==================================================                    |  71%  |                                                                              |==================================================                    |  72%  |                                                                              |===================================================                   |  72%  |                                                                              |===================================================                   |  73%  |                                                                              |===================================================                   |  74%  |                                                                              |====================================================                  |  74%  |                                                                              |====================================================                  |  75%  |                                                                              |=====================================================                 |  75%  |                                                                              |=====================================================                 |  76%  |                                                                              |======================================================                |  76%  |                                                                              |======================================================                |  77%  |                                                                              |======================================================                |  78%  |                                                                              |=======================================================               |  78%  |                                                                              |=======================================================               |  79%  |                                                                              |========================================================              |  79%  |                                                                              |========================================================              |  80%  |                                                                              |========================================================              |  81%  |                                                                              |=========================================================             |  81%  |                                                                              |=========================================================             |  82%  |                                                                              |==========================================================            |  82%  |                                                                              |==========================================================            |  83%  |                                                                              |==========================================================            |  84%  |                                                                              |===========================================================           |  84%  |                                                                              |===========================================================           |  85%  |                                                                              |============================================================          |  85%  |                                                                              |============================================================          |  86%  |                                                                              |=============================================================         |  86%  |                                                                              |=============================================================         |  87%  |                                                                              |=============================================================         |  88%  |                                                                              |==============================================================        |  88%  |                                                                              |==============================================================        |  89%  |                                                                              |===============================================================       |  89%  |                                                                              |===============================================================       |  90%  |                                                                              |===============================================================       |  91%  |                                                                              |================================================================      |  91%  |                                                                              |================================================================      |  92%  |                                                                              |=================================================================     |  92%  |                                                                              |=================================================================     |  93%  |                                                                              |=================================================================     |  94%  |                                                                              |==================================================================    |  94%  |                                                                              |==================================================================    |  95%  |                                                                              |===================================================================   |  95%  |                                                                              |===================================================================   |  96%  |                                                                              |====================================================================  |  96%  |                                                                              |====================================================================  |  97%  |                                                                              |====================================================================  |  98%  |                                                                              |===================================================================== |  98%  |                                                                              |===================================================================== |  99%  |                                                                              |======================================================================|  99%  |                                                                              |======================================================================| 100%</span></span>
<span><span class="va">states_sf</span> <span class="op">=</span> <span class="fu">tigris</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tigris/man/states.html" class="external-link">states</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2023</span>, cb <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;   |                                                                              |                                                                      |   0%  |                                                                              |=                                                                     |   1%  |                                                                              |=                                                                     |   2%  |                                                                              |==                                                                    |   3%  |                                                                              |==                                                                    |   4%  |                                                                              |===                                                                   |   4%  |                                                                              |====                                                                  |   5%  |                                                                              |====                                                                  |   6%  |                                                                              |=====                                                                 |   7%  |                                                                              |=====                                                                 |   8%  |                                                                              |======                                                                |   8%  |                                                                              |======                                                                |   9%  |                                                                              |=======                                                               |  10%  |                                                                              |=======                                                               |  11%  |                                                                              |========                                                              |  11%  |                                                                              |========                                                              |  12%  |                                                                              |=========                                                             |  13%  |                                                                              |==========                                                            |  14%  |                                                                              |==========                                                            |  15%  |                                                                              |===========                                                           |  15%  |                                                                              |===========                                                           |  16%  |                                                                              |============                                                          |  17%  |                                                                              |============                                                          |  18%  |                                                                              |=============                                                         |  18%  |                                                                              |=============                                                         |  19%  |                                                                              |==============                                                        |  20%  |                                                                              |==============                                                        |  21%  |                                                                              |===============                                                       |  21%  |                                                                              |===============                                                       |  22%  |                                                                              |================                                                      |  22%  |                                                                              |================                                                      |  23%  |                                                                              |=================                                                     |  24%  |                                                                              |=================                                                     |  25%  |                                                                              |==================                                                    |  25%  |                                                                              |==================                                                    |  26%  |                                                                              |===================                                                   |  27%  |                                                                              |===================                                                   |  28%  |                                                                              |====================                                                  |  28%  |                                                                              |====================                                                  |  29%  |                                                                              |=====================                                                 |  30%  |                                                                              |======================                                                |  31%  |                                                                              |======================                                                |  32%  |                                                                              |=======================                                               |  32%  |                                                                              |=======================                                               |  33%  |                                                                              |========================                                              |  34%  |                                                                              |========================                                              |  35%  |                                                                              |=========================                                             |  35%  |                                                                              |=========================                                             |  36%  |                                                                              |==========================                                            |  37%  |                                                                              |==========================                                            |  38%  |                                                                              |===========================                                           |  38%  |                                                                              |===========================                                           |  39%  |                                                                              |============================                                          |  39%  |                                                                              |============================                                          |  40%  |                                                                              |=============================                                         |  41%  |                                                                              |=============================                                         |  42%  |                                                                              |==============================                                        |  42%  |                                                                              |==============================                                        |  43%  |                                                                              |===============================                                       |  44%  |                                                                              |===============================                                       |  45%  |                                                                              |================================                                      |  45%  |                                                                              |================================                                      |  46%  |                                                                              |=================================                                     |  47%  |                                                                              |=================================                                     |  48%  |                                                                              |==================================                                    |  48%  |                                                                              |==================================                                    |  49%  |                                                                              |===================================                                   |  49%  |                                                                              |===================================                                   |  50%  |                                                                              |====================================                                  |  51%  |                                                                              |====================================                                  |  52%  |                                                                              |=====================================                                 |  52%  |                                                                              |=====================================                                 |  53%  |                                                                              |======================================                                |  54%  |                                                                              |======================================                                |  55%  |                                                                              |=======================================                               |  55%  |                                                                              |=======================================                               |  56%  |                                                                              |========================================                              |  57%  |                                                                              |=========================================                             |  58%  |                                                                              |=========================================                             |  59%  |                                                                              |==========================================                            |  59%  |                                                                              |==========================================                            |  60%  |                                                                              |===========================================                           |  61%  |                                                                              |===========================================                           |  62%  |                                                                              |============================================                          |  62%  |                                                                              |============================================                          |  63%  |                                                                              |=============================================                         |  64%  |                                                                              |=============================================                         |  65%  |                                                                              |==============================================                        |  65%  |                                                                              |==============================================                        |  66%  |                                                                              |===============================================                       |  66%  |                                                                              |===============================================                       |  67%  |                                                                              |================================================                      |  68%  |                                                                              |================================================                      |  69%  |                                                                              |=================================================                     |  70%  |                                                                              |=================================================                     |  71%  |                                                                              |==================================================                    |  71%  |                                                                              |==================================================                    |  72%  |                                                                              |===================================================                   |  73%  |                                                                              |===================================================                   |  74%  |                                                                              |====================================================                  |  74%  |                                                                              |====================================================                  |  75%  |                                                                              |=====================================================                 |  75%  |                                                                              |=====================================================                 |  76%  |                                                                              |======================================================                |  77%  |                                                                              |======================================================                |  78%  |                                                                              |=======================================================               |  78%  |                                                                              |=======================================================               |  79%  |                                                                              |========================================================              |  80%  |                                                                              |========================================================              |  81%  |                                                                              |=========================================================             |  81%  |                                                                              |=========================================================             |  82%  |                                                                              |==========================================================            |  83%  |                                                                              |===========================================================           |  84%  |                                                                              |===========================================================           |  85%  |                                                                              |============================================================          |  85%  |                                                                              |============================================================          |  86%  |                                                                              |=============================================================         |  87%  |                                                                              |=============================================================         |  88%  |                                                                              |==============================================================        |  88%  |                                                                              |==============================================================        |  89%  |                                                                              |===============================================================       |  90%  |                                                                              |===============================================================       |  91%  |                                                                              |================================================================      |  91%  |                                                                              |================================================================      |  92%  |                                                                              |=================================================================     |  92%  |                                                                              |=================================================================     |  93%  |                                                                              |==================================================================    |  94%  |                                                                              |==================================================================    |  95%  |                                                                              |===================================================================   |  95%  |                                                                              |===================================================================   |  96%  |                                                                              |====================================================================  |  97%  |                                                                              |====================================================================  |  98%  |                                                                              |===================================================================== |  98%  |                                                                              |===================================================================== |  99%  |                                                                              |======================================================================| 100%</span></span>
<span></span>
<span><span class="co">## apart from DC, which has a disproportionate number of non-joining ZCTAs--</span></span>
<span><span class="co">## seemingly corresponding to federal areas and buildings--the distribution of</span></span>
<span><span class="co">## non-joining ZCTAs appears proportionate to state-level populations and is </span></span>
<span><span class="co">## distributed across many states:</span></span>
<span><span class="va">zctas_sf</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">GEOID20</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">join_quality</span><span class="op">$</span><span class="va">data_geoids_unmatched</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_binary_ops.html" class="external-link">st_intersection</a></span><span class="op">(</span><span class="va">states_sf</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">NAME</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">NAME</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;                    NAME  n</span></span>
<span><span class="co">#&gt; 1  District of Columbia 19</span></span>
<span><span class="co">#&gt; 2              New York 15</span></span>
<span><span class="co">#&gt; 3                 Texas  9</span></span>
<span><span class="co">#&gt; 4            California  8</span></span>
<span><span class="co">#&gt; 5              Colorado  6</span></span>
<span><span class="co">#&gt; 6                  Utah  6</span></span>
<span><span class="co">#&gt; 7               Florida  5</span></span>
<span><span class="co">#&gt; 8          Pennsylvania  5</span></span>
<span><span class="co">#&gt; 9             Tennessee  5</span></span>
<span><span class="co">#&gt; 10             Virginia  5</span></span>
<span><span class="co">#&gt; 11              Alabama  4</span></span>
<span><span class="co">#&gt; 12              Arizona  4</span></span>
<span><span class="co">#&gt; 13             Kentucky  4</span></span>
<span><span class="co">#&gt; 14             Maryland  4</span></span>
<span><span class="co">#&gt; 15                 Ohio  4</span></span>
<span><span class="co">#&gt; 16           Washington  4</span></span>
<span><span class="co">#&gt; 17              Georgia  3</span></span>
<span><span class="co">#&gt; 18            Louisiana  3</span></span>
<span><span class="co">#&gt; 19             Michigan  3</span></span>
<span><span class="co">#&gt; 20       North Carolina  3</span></span>
<span><span class="co">#&gt; 21               Alaska  2</span></span>
<span><span class="co">#&gt; 22        Massachusetts  2</span></span>
<span><span class="co">#&gt; 23          Mississippi  2</span></span>
<span><span class="co">#&gt; 24         North Dakota  2</span></span>
<span><span class="co">#&gt; 25             Arkansas  1</span></span>
<span><span class="co">#&gt; 26               Hawaii  1</span></span>
<span><span class="co">#&gt; 27                Idaho  1</span></span>
<span><span class="co">#&gt; 28             Illinois  1</span></span>
<span><span class="co">#&gt; 29              Indiana  1</span></span>
<span><span class="co">#&gt; 30                 Iowa  1</span></span>
<span><span class="co">#&gt; 31               Kansas  1</span></span>
<span><span class="co">#&gt; 32                Maine  1</span></span>
<span><span class="co">#&gt; 33            Minnesota  1</span></span>
<span><span class="co">#&gt; 34             Missouri  1</span></span>
<span><span class="co">#&gt; 35              Montana  1</span></span>
<span><span class="co">#&gt; 36             Nebraska  1</span></span>
<span><span class="co">#&gt; 37               Nevada  1</span></span>
<span><span class="co">#&gt; 38           New Mexico  1</span></span>
<span><span class="co">#&gt; 39               Oregon  1</span></span>
<span><span class="co">#&gt; 40       South Carolina  1</span></span>
<span><span class="co">#&gt; 41              Vermont  1</span></span>
<span><span class="co">#&gt; 42            Wisconsin  1</span></span></code></pre></div>
<p>And how accurate was the crosswalking process?</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comparison_data</span> <span class="op">=</span> <span class="fu">tidycensus</span><span class="fu">::</span><span class="fu"><a href="https://walker-data.com/tidycensus/reference/get_acs.html" class="external-link">get_acs</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="fl">2023</span>,</span>
<span>    geography <span class="op">=</span> <span class="st">"puma"</span>,</span>
<span>    output <span class="op">=</span> <span class="st">"wide"</span>,</span>
<span>    variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      below_poverty_level <span class="op">=</span> <span class="st">"B17001_002"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    source_geoid <span class="op">=</span> <span class="va">GEOID</span>,</span>
<span>    count_below_poverty_level_acs <span class="op">=</span> <span class="va">below_poverty_levelE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">combined_data</span> <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span></span>
<span>  <span class="va">comparison_data</span>,</span>
<span>  <span class="va">crosswalked_data</span>,</span>
<span>  by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"source_geoid"</span> <span class="op">=</span> <span class="st">"geoid"</span><span class="op">)</span><span class="op">)</span> </span>
<span>  </span>
<span><span class="va">combined_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">source_geoid</span>, <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"count"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>difference_percent <span class="op">=</span> <span class="op">(</span><span class="va">count_below_poverty_level_acs</span> <span class="op">-</span> <span class="va">count_below_poverty_level</span><span class="op">)</span> <span class="op">/</span> <span class="va">count_below_poverty_level_acs</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">difference_percent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>panel.grid <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>      title <span class="op">=</span> <span class="st">"Crosswalked data approximates observed values"</span>,</span>
<span>      subtitle <span class="op">=</span> <span class="st">"Block group-level source data would produce more accurate crosswalked values"</span>,</span>
<span>      y <span class="op">=</span> <span class="st">""</span>,</span>
<span>      x <span class="op">=</span> <span class="st">"Percent difference between observed and crosswalked values"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-6-1.png" alt="" width="100%"></p>
</div>
<div class="section level2">
<h2 id="core-functions">Core Functions<a class="anchor" aria-label="anchor" href="#core-functions"></a>
</h2>
<p>The package has two main functions, though you can also specify the needed crosswalk(s) directly from <code><a href="reference/crosswalk_data.html">crosswalk_data()</a></code> and omit the intermediate <code><a href="reference/get_crosswalk.html">get_crosswalk()</a></code> call.</p>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Purpose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="reference/get_crosswalk.html">get_crosswalk()</a></code></td>
<td>Fetch crosswalk(s)</td>
</tr>
<tr class="even">
<td><code><a href="reference/crosswalk_data.html">crosswalk_data()</a></code></td>
<td>Apply crosswalk(s) to interpolate data to the target geography-year</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="understanding-get_crosswalk-output">Understanding <code>get_crosswalk()</code> Output<a class="anchor" aria-label="anchor" href="#understanding-get_crosswalk-output"></a>
</h2>
<p><code><a href="reference/get_crosswalk.html">get_crosswalk()</a></code> <strong>always returns a list</strong> structured as follows:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_crosswalk.html">get_crosswalk</a></span><span class="op">(</span></span>
<span>  source_geography <span class="op">=</span> <span class="st">"tract"</span>,</span>
<span>  target_geography <span class="op">=</span> <span class="st">"zcta"</span>,</span>
<span>  source_year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>  target_year <span class="op">=</span> <span class="fl">2020</span>,</span>
<span>  weight <span class="op">=</span> <span class="st">"population"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "crosswalks" "plan"       "message"</span></span>
<span><span class="co">#&gt; [1] "crosswalks" "plan" "message"</span></span></code></pre></div>
<p>The list contains three elements:</p>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Element</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>crosswalks</code></td>
<td>A named list of crosswalks (<code>step_1</code>, <code>step_2</code>, etc.) of length one or greater</td>
</tr>
<tr class="even">
<td><code>plan</code></td>
<td>Details about what crosswalks are being fetched</td>
</tr>
<tr class="odd">
<td><code>message</code></td>
<td>A human-readable description of the crosswalk chain</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="single-step-vs-multi-step-crosswalks">Single-Step vs. Multi-Step Crosswalks<a class="anchor" aria-label="anchor" href="#single-step-vs-multi-step-crosswalks"></a>
</h3>
<p><strong>Single-step crosswalks</strong> (same year, different geography OR same geography, different year):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Same year, different geography (Geocorr)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_crosswalk.html">get_crosswalk</a></span><span class="op">(</span></span>
<span>  source_geography <span class="op">=</span> <span class="st">"tract"</span>,</span>
<span>  target_geography <span class="op">=</span> <span class="st">"zcta"</span>,</span>
<span>  weight <span class="op">=</span> <span class="st">"population"</span><span class="op">)</span></span>
<span><span class="co"># result$crosswalks$step_1 contains one crosswalk</span></span>
<span></span>
<span><span class="co"># Same geography, different year (NHGIS)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_crosswalk.html">get_crosswalk</a></span><span class="op">(</span></span>
<span>  source_geography <span class="op">=</span> <span class="st">"tract"</span>,</span>
<span>  target_geography <span class="op">=</span> <span class="st">"tract"</span>,</span>
<span>  source_year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>  target_year <span class="op">=</span> <span class="fl">2020</span><span class="op">)</span></span>
<span><span class="co"># result$crosswalks$step_1 contains one crosswalk</span></span></code></pre></div>
<p><strong>Multi-step crosswalks</strong> (when a single, direct crosswalk is not available):</p>
<p>For some source year/geography -&gt; target year/geography specifications do not have a crosswalk. In such cases, two or more crosswalks may be needed. The package automatically plans and fetches the required crosswalks:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Step 1 (NHGIS)</strong>: Change year, keep geography constant</li>
<li>
<strong>Step 2 (Geocorr)</strong>: Change geography at target year</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_crosswalk.html">get_crosswalk</a></span><span class="op">(</span></span>
<span>  source_geography <span class="op">=</span> <span class="st">"tract"</span>,</span>
<span>  target_geography <span class="op">=</span> <span class="st">"zcta"</span>,</span>
<span>  source_year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>  target_year <span class="op">=</span> <span class="fl">2020</span>,</span>
<span>  weight <span class="op">=</span> <span class="st">"population"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Two crosswalks are returned</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">crosswalks</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "step_1" "step_2"</span></span>
<span><span class="co">#&gt; [1] "step_1" "step_2"</span></span>
<span></span>
<span><span class="co"># Step 1: 2010 tracts -&gt; 2020 tracts (NHGIS)</span></span>
<span><span class="co"># Step 2: 2020 tracts -&gt; 2020 ZCTAs (Geocorr)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="crosswalk-structure">Crosswalk Structure<a class="anchor" aria-label="anchor" href="#crosswalk-structure"></a>
</h3>
<p>Each crosswalk contains standardized columns:</p>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Column</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>source_geoid</code></td>
<td>Identifier for source geography</td>
</tr>
<tr class="even">
<td><code>target_geoid</code></td>
<td>Identifier for target geography</td>
</tr>
<tr class="odd">
<td><code>allocation_factor_source_to_target</code></td>
<td>Weight for interpolating values</td>
</tr>
<tr class="even">
<td><code>weighting_factor</code></td>
<td>What attribute was used (population, housing, land)</td>
</tr>
</tbody>
</table>
<p>Additional columns may include <code>source_year</code>, <code>target_year</code>, <code>population_2020</code>, <code>housing_2020</code> (or <code>population_2010</code>, <code>housing_2010</code> for 2010s-vintage crosswalks), and <code>land_area_sqmi</code> depending on the source of the crosswalk.</p>
</div>
<div class="section level3">
<h3 id="accessing-metadata">Accessing Metadata<a class="anchor" aria-label="anchor" href="#accessing-metadata"></a>
</h3>
<p>Each crosswalk tibble has a <code>crosswalk_metadata</code> attribute that documents what the crosswalk represents and how it was created:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">crosswalks</span><span class="op">$</span><span class="va">step_1</span>, <span class="st">"crosswalk_metadata"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "call_parameters"               "data_source"                  </span></span>
<span><span class="co">#&gt;  [3] "data_source_full_name"         "download_url"                 </span></span>
<span><span class="co">#&gt;  [5] "api_endpoint"                  "documentation_url"            </span></span>
<span><span class="co">#&gt;  [7] "citation_url"                  "github_repository"            </span></span>
<span><span class="co">#&gt;  [9] "source_geography"              "source_geography_standardized"</span></span>
<span><span class="co">#&gt; [11] "target_geography"              "target_geography_standardized"</span></span>
<span><span class="co">#&gt; [13] "source_year"                   "target_year"                  </span></span>
<span><span class="co">#&gt; [15] "reference_year"                "weighting_variable"           </span></span>
<span><span class="co">#&gt; [17] "state_coverage"                "notes"                        </span></span>
<span><span class="co">#&gt; [19] "retrieved_at"                  "cached"                       </span></span>
<span><span class="co">#&gt; [21] "cache_path"                    "read_from_cache"              </span></span>
<span><span class="co">#&gt; [23] "is_multi_step"                 "crosswalk_package_version"</span></span>
<span><span class="co">#&gt; [1] "call_parameters" "data_source" "data_source_full_name" "download_url" ...</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="using-crosswalk_data-to-interpolate-data">Using <code>crosswalk_data()</code> to Interpolate Data<a class="anchor" aria-label="anchor" href="#using-crosswalk_data-to-interpolate-data"></a>
</h2>
<p><code><a href="reference/crosswalk_data.html">crosswalk_data()</a></code> applies crosswalk weights to transform your data. It automatically handles multi-step crosswalks. If you’re in a hurry, you can omit a call to <code><a href="reference/get_crosswalk.html">get_crosswalk()</a></code> and specify the needed crosswalk parameters to <code><a href="reference/crosswalk_data.html">crosswalk_data()</a></code>, which will pass these to <code><a href="reference/get_crosswalk.html">get_crosswalk()</a></code> behind the scenes.</p>
<div class="section level3">
<h3 id="column-naming-convention">Column Naming Convention<a class="anchor" aria-label="anchor" href="#column-naming-convention"></a>
</h3>
<p>The function auto-detects columns based on prefixes:</p>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Prefix</th>
<th>Treatment</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>count_</code></td>
<td>Summed after weighting (for counts like population, housing units)</td>
</tr>
<tr class="even">
<td>
<code>mean_</code>, <code>median_</code>, <code>percent_</code>, <code>ratio_</code>
</td>
<td>Weighted mean (for rates, percentages, averages)</td>
</tr>
</tbody>
</table>
<p>You can also specify columns explicitly via <code>count_columns</code> and <code>non_count_columns</code>. All non-count variables are interpolated using weighted means, weighting by the allocation factor from the crosswalk.</p>
</div>
</div>
<div class="section level2">
<h2 id="supported-geography-and-year-combinations">Supported Geography and Year Combinations<a class="anchor" aria-label="anchor" href="#supported-geography-and-year-combinations"></a>
</h2>
<div class="section level3">
<h3 id="inter-geography-crosswalks-geocorr">Inter-Geography Crosswalks (Geocorr)<a class="anchor" aria-label="anchor" href="#inter-geography-crosswalks-geocorr"></a>
</h3>
<p>The package supports inter-geography crosswalks for both 2020s and 2010s Census geographies, automatically selecting the correct GeoCorr version based on the year context you provide.</p>
<p><strong>2020s geography (GeoCorr 2022, 2020 Census):</strong> Used when years are 2020+, or when no year is specified.</p>
<ul>
<li>block, block group, tract, county</li>
<li>place, zcta, puma22</li>
<li>cd118, cd119, urban_area, core_based_statistical_area</li>
</ul>
<p><strong>2010s geography (GeoCorr 2018, 2010 Census):</strong> Used when years are in the 2010s (2010-2019).</p>
<ul>
<li>block, block group, tract, county</li>
<li>place, zcta, puma12</li>
<li>cd115, cd116</li>
</ul>
</div>
<div class="section level3">
<h3 id="inter-temporal-crosswalks-nhgis">Inter-Temporal Crosswalks (NHGIS)<a class="anchor" aria-label="anchor" href="#inter-temporal-crosswalks-nhgis"></a>
</h3>
<p>NHGIS provides cross-decade crosswalks with the following structure:</p>
<p><strong>Source geographies:</strong> block, block_group, tract</p>
<p><strong>Target geographies:</strong> - From blocks (decennial years only): block, block_group, tract, county, place, zcta, puma, urban_area, cbsa - From block_group or tract: block_group, tract, county</p>
<table class="table">
<thead><tr class="header">
<th>Source Years</th>
<th>Target Years</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1990, 2000</td>
<td>2010, 2014, 2015, 2020, 2022</td>
</tr>
<tr class="even">
<td>2010, 2011, 2012, 2014, 2015</td>
<td>1990, 2000, 2020, 2022</td>
</tr>
<tr class="odd">
<td>2020, 2022</td>
<td>1990, 2000, 2010, 2014, 2015</td>
</tr>
</tbody>
</table>
<p><strong>Notes:</strong> - Within-decade crosswalks (e.g., 2010→2014) are not available from NHGIS - Block→ZCTA, Block→PUMA, etc. are only available for decennial years (1990, 2000, 2010, 2020) - The package automatically uses direct NHGIS crosswalks when available (e.g., <code>get_crosswalk(source_geography = "block", target_geography = "zcta", source_year = 2010, target_year = 2020)</code> returns a single-step NHGIS crosswalk)</p>
</div>
<div class="section level3">
<h3 id="id_20202022-crosswalks-ctdata">2020→2022 Crosswalks (CTData)<a class="anchor" aria-label="anchor" href="#id_20202022-crosswalks-ctdata"></a>
</h3>
<p>For 2020 to 2022 transformations, the package uses CT Data Collaborative crosswalks for Connecticut (where planning regions replaced counties) and identity mappings for other states (where no changes occurred).</p>
</div>
</div>
<div class="section level2">
<h2 id="api-keys">API Keys<a class="anchor" aria-label="anchor" href="#api-keys"></a>
</h2>
<p>NHGIS crosswalks require an IPUMS API key. Get one at <a href="https://account.ipums.org/api_keys" class="external-link uri">https://account.ipums.org/api_keys</a> and add to your <code>.Renviron</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu">edit_r_environ</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># Add: IPUMS_API_KEY=your_key_here</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="caching">Caching<a class="anchor" aria-label="anchor" href="#caching"></a>
</h2>
<p>Use the <code>cache</code> parameter to save crosswalks locally for ease:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_crosswalk.html">get_crosswalk</a></span><span class="op">(</span></span>
<span>  source_geography <span class="op">=</span> <span class="st">"tract"</span>,</span>
<span>  target_geography <span class="op">=</span> <span class="st">"zcta"</span>,</span>
<span>  weight <span class="op">=</span> <span class="st">"population"</span>,</span>
<span>  cache <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu">here</span><span class="op">(</span><span class="st">"crosswalks-cache"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="citations">Citations<a class="anchor" aria-label="anchor" href="#citations"></a>
</h2>
<p>The intellectual credit for the underlying crosswalks belongs to the original developers.</p>
<p><strong>For NHGIS</strong>, see citation requirements at: <a href="https://www.nhgis.org/citation-and-use-nhgis-data" class="external-link uri">https://www.nhgis.org/citation-and-use-nhgis-data</a></p>
<p><strong>For Geocorr</strong>, suggested citations:</p>
<blockquote>
<p>Missouri Census Data Center, University of Missouri. (2022). Geocorr 2022: Geographic Correspondence Engine. Retrieved from: <a href="https://mcdc.missouri.edu/applications/geocorr2022.html" class="external-link uri">https://mcdc.missouri.edu/applications/geocorr2022.html</a></p>
</blockquote>
<blockquote>
<p>Missouri Census Data Center, University of Missouri. (2018). Geocorr 2018: Geographic Correspondence Engine. Retrieved from: <a href="https://mcdc.missouri.edu/applications/geocorr2018.html" class="external-link uri">https://mcdc.missouri.edu/applications/geocorr2018.html</a></p>
</blockquote>
<p><strong>For CTData</strong>, a suggested citation (adjust for alternate source geography):</p>
<blockquote>
<p>CT Data Collaborative. (2023). 2022 Census Tract Crosswalk. Retrieved from: <a href="https://github.com/CT-Data-Collaborative/2022-tract-crosswalk" class="external-link uri">https://github.com/CT-Data-Collaborative/2022-tract-crosswalk</a>.</p>
</blockquote>
<p><strong>For this package</strong>, refer here: <a href="https://ui-research.github.io/crosswalk/authors.html#citation" class="uri">https://ui-research.github.io/crosswalk/authors.html#citation</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing crosswalk</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Will Curran-Groome <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Will Curran-Groome.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
